<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>a certain VP site</title>
    <link rel="stylesheet" href="styleforsheets.css">
    <script src="filterscript.js" defer></script>
    <style>
        * {
            text-decoration: none;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        }

        body {
            background: #FEDC3C;
        }

        nav {
            height: 50px;
            background: #FEDC3C;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0rem calc((100vw - 1300px) / 2);
        }

        nav a {
            text-decoration: none;
            color: black;
            padding: 1rem;
        }

        .logo {
            font-family: fantasy;
            margin-left: 50px;
        }

        input {
            font-size: 1rem;
        }

        .filter {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
        }

        .wrapper {
            height: 600px; /* Fixed height for scrolling */
            width: 1400px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            border-radius: 10px;
            background-color: rgb(0, 0, 0);
            box-shadow: 0 4px 8px rgb(0, 0, 0);
            overflow-y: auto; /* Enable vertical scrolling */
        }

        .input-group {
            position: relative;
            width: 100%;
        }

        .input-group input {
            width: 100%;
            padding: 10px 30px 10px 10px;
            font-size: 16px;
            color: rgb(0, 0, 0);
            outline: none;
            border: none;
            border-radius: 8px;
        }

        .sheet {
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: .3s;
        }

        .sheet:hover {
            background: #FEDC3C;
        }

        .textbox {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #FEDC3C;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            cursor: move;
            z-index: 2;
            display: none;
            max-width: 80%;
            max-height: 80%;
            overflow-y: auto;
            resize: none; /* Disable default resizing */
        }

        .resize-handle {
            width: 10px;
            height: 10px;
            background: #FEDC3C;
            position: absolute;
            bottom: 5px;
            right: 5px;
            cursor: nwse-resize; /* Diagonal resize cursor */
            z-index: 3; /* Ensure it's above the textbox */
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            color: #FEDC3C;
        }

        .close-btn {
            cursor: pointer;
            font-size: 20px;
            color: #FEDC3C;
            padding: 5px;
            border: none;
            background: none;
        }

        #copy-btn {
            cursor: pointer;
            padding: 5px 10px;
            border: 2px solid #FEDC3C;
            border-radius: 5px;
            background: black;
            color: #FEDC3C;
            transition: background 0.3s;
        }

        #copy-btn:hover {
            background: #FEDC3C;
            color: black;
        }

        pre {
            margin: 0;
            color: white;
        }
    </style>
</head>

<body>
    <nav>
        <div class="logo">ACERTAIN VP SITE</div>
        <div class="nav-items">
            <a href="index.html">Home</a>
            <a href="sheets.html">Sheets</a>
            <a href="Converter.html">Converter</a>
            <a href="Contact.html">Contact</a>
        </div>
    </nav>

    <div class="filter">
        <div class="wrapper">
            <div class="input-group">
                <input type="text" id="searchInput" placeholder="Search..." onkeyup="filterSheets()">
            </div>
            <div class="sheet" data-file="sheets/Marigold_Deemo.txt">Marigold - Deemo</div>
            <div class="sheet" data-file="sheets/Eminem_Mockingbird.txt">Eminem - Mockingbird</div>
            <div class="sheet" data-file="sheets/A Pretty Hard Arrangement of the Interstellar Theme.txt">A Pretty Hard Arrangement of the Interstellar Theme (Akmigone Arr.)</div>
            <div class="sheet" data-file="sheets/Pirates Of The Carribean_Hes a Pirate.txt">Pirates Of The Carribean - He's a Pirate</div>
            <div class="sheet" data-file="sheets/Time_Inception.txt">Time-inception</div>
            <div class="sheet" data-file="sheets/Hunting for your dreams_HxH.txt">Hunting for your dreams - HxH</div>
            <div class="sheet" data-file="sheets/Haruka Mirai _Black Clover.txt">Haruka Mirai - Black Clover</div>
            <div class="sheet" data-file="sheets/Persona 3 Reload_Its going down.txt">Persona 3 Reload - It's going down</div>
            <div class="sheet" data-file="sheets/Isabellas Lullaby.txt">Isabella's Lullaby (advanced)</div>
            <div class="sheet" data-file="sheets/La campanella_Franz List.txt">La campanella - Franz Liszt</div>
            <div class="sheet" data-file="sheets/Shostakovich_Waltz No_ 2.txt">Shostakovich - Waltz No. 2</div>
            <div class="sheet" data-file="sheets/Tom Brier Super mario world ending theme.txt">Tom Brier - Super Mario World Ending Theme</div>
            <div class="sheet" data-file="sheets/Tokyo Ghoul_rootA.txt">Tokyo Ghoul - Root A</div>
            <div class="sheet" data-file="sheets/Bleach_ranbunomelody.txt">Bleach - Ranbu No Melody</div>
            <div class="sheet" data-file="sheets/Bleach_nevermeanttobelong.txt">Bleach - Never Meant To Belong</div>
            <!-- Add more sheets here -->
        </div>
    </div>

    <!-- Draggable and Resizable Textbox -->
    <div id="textbox" class="textbox">
        <div class="header">
            <span class="close-btn" id="close-btn">&times;</span>
            <button id="copy-btn">Copy</button>
        </div>
        <pre id="file-content"></pre>
        <div class="resize-handle"></div> <!-- Resize handle -->
    </div>

    <script>
        function filterSheets() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toLowerCase();
            const sheets = document.querySelectorAll('.sheet');

            sheets.forEach(sheet => {
                const text = sheet.textContent.toLowerCase();
                if (text.includes(filter)) {
                    sheet.style.display = ""; // Show the sheet
                } else {
                    sheet.style.display = "none"; // Hide the sheet
                }
            });
        }

        document.querySelectorAll('.sheet').forEach(item => {
            item.addEventListener('click', function() {
                const filePath = this.getAttribute('data-file'); // Get the data-file attribute

                // Fetch the content of the text file
                fetch(filePath)
                    .then(response => {
                        if (!response.ok) throw new Error('Network response was not ok');
                        return response.text();
                    })
                    .then(text => {
                        document.getElementById('file-content').textContent = text; // Set content to the textbox
                        const textbox = document.getElementById('textbox');

                        textbox.style.display = 'block'; // Show the textbox

                        // Enable dragging
                        dragElement(textbox);
                    })
                    .catch(error => {
                        console.error('There was a problem with the fetch operation:', error);
                        alert('Failed to load the file. Please try again later.');
                    });
            });
        });

        // Close button functionality
        document.getElementById('close-btn').addEventListener('click', function() {
            const textbox = document.getElementById('textbox');
            textbox.style.display = 'none'; // Hide the textbox
        });

        // Copy button functionality
        document.getElementById('copy-btn').addEventListener('click', function() {
            const content = document.getElementById('file-content').textContent;
            navigator.clipboard.writeText(content).then(() => {
                const copyBtn = document.getElementById('copy-btn');
                copyBtn.textContent = 'Copied!'; // Change button text
                setTimeout(() => {
                    copyBtn.textContent = 'Copy'; // Reset button text after 2 seconds
                }, 2000);
            }).catch(err => {
                console.error('Could not copy text: ', err);
            });
        });

        function dragElement(elmnt) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;

            elmnt.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                // Prevent dragging if mouse is down on the resize handle
                if (e.target.classList.contains('resize-handle')) {
                    return; // Exit the function if resizing
                }

                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos4 = e.clientY;
                pos3 = e.clientX;
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";

                // Update the position of the resize handle
                const resizeHandle = elmnt.querySelector('.resize-handle');
                resizeHandle.style.bottom = '5px';
                resizeHandle.style.right = '5px';
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // Enable resizing
        const resizeHandle = document.querySelector('.resize-handle');

        resizeHandle.addEventListener('mousedown', initResize);

        function initResize(e) {
            e.preventDefault();
            window.addEventListener('mousemove', elementResize);
            window.addEventListener('mouseup', stopResize);
        }

        function elementResize(e) {
            const textbox = document.getElementById('textbox');
            const newWidth = e.clientX - textbox.getBoundingClientRect().left;
            const newHeight = e.clientY - textbox.getBoundingClientRect().top;

            textbox.style.width = newWidth + 'px';
            textbox.style.height = newHeight + 'px';

            // Update the position of the resize handle
            const resizeHandle = textbox.querySelector('.resize-handle');
            resizeHandle.style.bottom = '5px';
            resizeHandle.style.right = '5px';
        }

        function stopResize() {
            window.removeEventListener('mousemove', elementResize);
            window.removeEventListener('mouseup', stopResize);
        }
    </script>
</body>

</html>
